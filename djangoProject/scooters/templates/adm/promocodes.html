{% extends 'adm/index.html' %}
{% load static %}
{% block content_header %}

<div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 class="m-0">{{name}}</h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">{% block content_header_breadcrumb %}ScooterADM{% endblock %}</a></li>
              <li class="breadcrumb-item active">{{name}}</li>
            </ol>
          </div>
        </div>
      </div>
    </div>

{% endblock %}

{% block main_content.html %}
<style>
.popup {
    z-index: 4;
    position: fixed;
    width: 100%;
    height: 100%;
    background-color:rgba(0,0,0,0.8);
    top:0;
    right:0;
    opacity:0;
    visibility:hidden;
    transition:all 0.8s ease 0s;

}
.popup:target{
    opacity:1;
    visibility:visible;
}

.popup:target .popup__content{
    transform: translate(0px, 0px);
    opacity:1;
}
.popup__area{
    position:absolute;
    width:100%;
    height:100%;
    top:0;
    right:0;
}
.popup__body {
    min-height: 100%;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:30px 10px;
}
.popup__content {
    background-color:#fff;
    color:#000;
    max-width:30%;
    max-height:80%;
    right:0px;
    padding:30px;
    position:absolute;
    opacity:0;
    transition:all 0.8s ease 0s;
    transform: translate(100%, 0%);
    overflow-y:auto;
    overflow-x:hidden;

}

.popup__title {
    font-size:25px;
    margin:0px 0px 1em 0px;
}
.popup__close {
    position:absolute;
    left:20px;
    top:10px;
    font-size:20px;
    color:#000;
    text-decoration:none;
}

</style>

<div class="card-body">
  <div class="info-box" style="min-height: 0px; padding: 0.1rem;">
    <div class="info-box-content" >
      <table>
          <tr>
              <td><font style="text-align: left;">{{summ}} - {{nn}}
              </font></td>
              <td style="text-align: right;">
                  <a href="#popup">
                  Добавить
                  </a>
              </td>
          </tr>
      </table>
    </div>
  </div>

  <table id="example1" class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>Код</th>
        <th>Тип</th>
        <th>Статус</th>
        <th>Лимит</th>
        <th>Сумма</th>
        <th>Действует с</th>
        <th>Действует по</th>
        <th>Дата создания</th>
      </tr>
    </thead>
    <tbody>
        {%for el in Promocodes %}
        <tr>
          <td>{{el.NameOfPromoCode}}</td>
          <td>{{el.TypeOfPromoCode}}</td>
          <td>{{el.StatusOfPromoCode}}</td>
          <td>{{el.Limit}}</td>
          <td>{{el.Sum}}</td>
          <td>{{el.StartOfActive}}</td>
          <td>{{el.EndOfActive}}</td>
          <td>{{el.DateOfCreation}}</td>
        </tr>
        {% endfor%}
    </tbody>
  </table>
  <div id="popup" class="popup">
    <a href="#header" class="popup__area"></a>
    <div class="popup__body">
      <div class="popup__content">
        <a href="#header" class="popup__close">X</a>
        <div class="popup__title">
          Новый промокод:
        </div>
        <div class="popup__text">
          <form method="post" action="{%url 'promocodes' %}" name="AddPromocodeForm">
            {% csrf_token %}
              <label>Введите название промокода:</label><br>
              {{form.NameOfPromoCode}}<br>
              <label>Выберите тип промокода:</label><br>
              {{form.TypeOfPromoCode}}<br>
              <label>Выберите статус:</label><br>
              {{form.StatusOfPromoCode}}<br>
              <label>Укажите лимит:</label><br>
              {{form.Limit}}<br>
              <label>Сумма:</label><br>
              {{form.Sum}}<br>
              <label>Действует с:</label><br>
              {{form.StartOfActive}}
              <input type="datetime-local" id="id_StartOfActive_datetime-local"><br>
              <label>Действует по:</label><br>
              {{form.EndOfActive}}
              <input type="datetime-local" id="id_EndOfActive_datetime-local"><br>
              {{form.errors}}
            <span>{{error}}</span>

            <button class="btn btn-success" type="submit" value="Save" style="margin-top:10px">Добавить</button>
          </form>

        </div>

      </div>
    </div>
  </div>
</div>
<script>
window.addEventListener("load", startup, false);
function startup() {
    StartOfActiveDatetimeLocal = document.getElementById("id_StartOfActive_datetime-local");
    EndOfActiveDatetimeLocal = document.getElementById("id_EndOfActive_datetime-local");
    StartOfActiveDatetimeLocal.addEventListener("change", functionEvent, false);
    EndOfActiveDatetimeLocal.addEventListener("change", functionEvent, false);
}

function functionEvent(event) {
document.getElementById('id_StartOfActive').value=StartOfActiveDatetimeLocal.value
document.getElementById('id_EndOfActive').value=EndOfActiveDatetimeLocal.value
}

</script>
{% endblock %}

